const axios = require('axios');
const fs = require('fs');
const path = require('path');

async function sendFlightReportStage4() {
    const botToken = '7659930552:AAF_jF1rAXFnjFO176-9X5fKfBwbrko8BNc';
    const chatId = '-1002658082392';
    
    const report = `âœˆï¸ é£›æ©Ÿå½™å ± - éšæ®µ 4 å®Œæˆå ±å‘Š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š å·¥ä½œé€²åº¦å½™æ•´:                              â”‚
â”‚ âœ… å®Œæˆä»»å‹™: GPSæ‰“å¡ç³»çµ±é–‹ç™¼å®Œæˆ             â”‚
â”‚ ğŸ“ˆ å®Œæˆç‡: 50.0% (8/16 å·²å®Œæˆ)              â”‚
â”‚ ğŸ”§ ä½¿ç”¨æ¨¡çµ„: æ±ºç­–å¼•æ“ã€å·¥å…·ç·¨æ’ã€geolibåœ°ç†è¨ˆç®— â”‚
â”‚ â±ï¸ åŸ·è¡Œæ™‚é–“: ç´„ 90 åˆ†é˜                     â”‚
â”‚                                           â”‚
â”‚ ğŸ” æŠ€è¡“åˆ†æç™¼ç¾:                              â”‚
â”‚ ğŸ“ å®Œæ•´GPSå®šä½æ‰“å¡ç³»çµ±å¯¦ç¾                   â”‚
â”‚ ğŸ—ºï¸ åœ°ç†ä½ç½®è·é›¢è¨ˆç®—å¼•æ“                      â”‚
â”‚ ğŸ” è¨­å‚™æŒ‡ç´‹æª¢æ¸¬é˜²å½æ©Ÿåˆ¶                       â”‚
â”‚ ğŸ“± ç§»å‹•ç«¯å„ªåŒ–GPSå®šä½ç•Œé¢                     â”‚
â”‚ ğŸª è‡ªå‹•åˆ†åº—è­˜åˆ¥ç³»çµ±                         â”‚
â”‚ â° é²åˆ°æ™‚é–“æ™ºèƒ½è¨ˆç®—                         â”‚
â”‚ ğŸ“‹ 5æ¬¡æ‰“å¡è¨˜éŒ„æ­·å²æŸ¥è©¢                       â”‚
â”‚ ğŸš¨ è¨­å‚™ç•°å¸¸æª¢æ¸¬é€šçŸ¥                         â”‚
â”‚ ğŸ¤– å®Œæ•´Telegramé€šçŸ¥æ•´åˆ                     â”‚
â”‚                                           â”‚
â”‚ ğŸ› ï¸ ç³»çµ±åŠŸèƒ½é©—è­‰:                             â”‚
â”‚ âœ… GPSå®šä½ç²¾æº–åº¦: Â±20å…¬å°º                   â”‚
â”‚ âœ… ä¸Šç­æ‰“å¡æ¸¬è©¦: æˆåŠŸ(21196å…¬å°ºå¤–)           â”‚
â”‚ âœ… ä¸‹ç­æ‰“å¡æ¸¬è©¦: æˆåŠŸè‡ªå‹•è­˜åˆ¥               â”‚
â”‚ âœ… æ‰“å¡è¨˜éŒ„æŸ¥è©¢: 2ç­†è¨˜éŒ„æ­£å¸¸é¡¯ç¤º             â”‚
â”‚ âœ… Telegramé€šçŸ¥: å“¡å·¥+è€é—†é›™é‡é€šçŸ¥           â”‚
â”‚ âœ… è¨­å‚™æŒ‡ç´‹ç”Ÿæˆ: ç€è¦½å™¨/ç³»çµ±ä¿¡æ¯å®Œæ•´         â”‚
â”‚                                           â”‚
â”‚ ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè­°:                                â”‚
â”‚ ğŸ’° ç‡Ÿæ”¶ç®¡ç†ç³»çµ±é–‹ç™¼(çé‡‘è¨ˆç®—å¼•æ“)             â”‚
â”‚ ğŸ“¦ å«è²¨ç®¡ç†ç³»çµ±å»ºç½®(ç•°å¸¸ç›£æ§)               â”‚
â”‚                                           â”‚
â”‚ ğŸ’¾ Gitç‹€æ…‹å‚™è¨»:                              â”‚
â”‚ ğŸ“ GPSæ‰“å¡ç³»çµ±å®Œæ•´å¯¦ç¾éœ€è¦æäº¤                â”‚
â”‚                                           â”‚
â”‚ ğŸ“± é€šçŸ¥ç¢ºèª: âœ… Telegramé€šçŸ¥å·²ç™¼é€           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`;

    try {
        const response = await axios.post(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            chat_id: chatId,
            text: report,
            parse_mode: 'HTML'
        });
        
        console.log('âœ… éšæ®µ4é£›æ©Ÿå½™å ±ç™¼é€æˆåŠŸ');
        
        // ä¿å­˜æœ¬åœ°å ±å‘Š
        const reportDir = './flight-reports';
        if (!fs.existsSync(reportDir)) {
            fs.mkdirSync(reportDir, { recursive: true });
        }
        
        const timestamp = new Date().toISOString().replace(/:/g, '-').split('T')[0];
        const reportPath = path.join(reportDir, `flight-report-stage-4-${timestamp}.txt`);
        fs.writeFileSync(reportPath, report, 'utf8');
        console.log(`ğŸ“ éšæ®µ4å ±å‘Šå·²ä¿å­˜: ${reportPath}`);
        
    } catch (error) {
        console.error('âŒ éšæ®µ4é£›æ©Ÿå½™å ±ç™¼é€å¤±æ•—:', error.message);
    }
}

sendFlightReportStage4();